<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>6&nbsp;Text Generation</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="shaded.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Scribble:<span class="mywbr"> </span> The Racket Documentation Tool</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="getting-started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="reader.html" class="tocviewlink" data-pltdoc="x">@ Syntax</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="generic-prose.html" class="tocviewlink" data-pltdoc="x">High-<wbr></wbr>Level Scribble API</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="plt-manuals.html" class="tocviewlink" data-pltdoc="x">Scribbling Documentation</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="lp.html" class="tocviewlink" data-pltdoc="x">Literate Programming</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Text Generation</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="internals.html" class="tocviewlink" data-pltdoc="x">Low-<wbr></wbr>Level Scribble API</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="running.html" class="tocviewlink" data-pltdoc="x">Running <span class="stt">scribble</span></a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>6&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Text Generation</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="#%28part._.Writing_.Text_.Files%29" class="tocviewlink" data-pltdoc="x">Writing Text Files</a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="#%28part._.Defining_.Functions_and_.More%29" class="tocviewlink" data-pltdoc="x">Defining Functions and More</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="#%28part._.Using_.Printouts%29" class="tocviewlink" data-pltdoc="x">Using Printouts</a></td></tr><tr><td align="right">6.4&nbsp;</td><td><a href="#%28part._.Indentation_in_.Preprocessed_output%29" class="tocviewlink" data-pltdoc="x">Indentation in Preprocessed output</a></td></tr><tr><td align="right">6.5&nbsp;</td><td><a href="#%28part._.Using_.External_.Files%29" class="tocviewlink" data-pltdoc="x">Using External Files</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.1<tt>&nbsp;</tt></span><a href="#(part._.Writing_.Text_.Files)" class="tocsubseclink" data-pltdoc="x">Writing Text Files</a></td></tr><tr><td><span class="tocsublinknumber">6.2<tt>&nbsp;</tt></span><a href="#(part._.Defining_.Functions_and_.More)" class="tocsubseclink" data-pltdoc="x">Defining Functions and More</a></td></tr><tr><td><span class="tocsublinknumber">6.3<tt>&nbsp;</tt></span><a href="#(part._.Using_.Printouts)" class="tocsubseclink" data-pltdoc="x">Using Printouts</a></td></tr><tr><td><span class="tocsublinknumber">6.4<tt>&nbsp;</tt></span><a href="#(part._.Indentation_in_.Preprocessed_output)" class="tocsubseclink" data-pltdoc="x">Indentation in Preprocessed output</a></td></tr><tr><td><span class="tocsublinknumber">6.5<tt>&nbsp;</tt></span><a href="#(part._.Using_.External_.Files)" class="tocsubseclink" data-pltdoc="x">Using External Files</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="lp.html" title="backward to &quot;5 Literate Programming&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Scribble: The Racket Documentation Tool&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="internals.html" title="forward to &quot;7 Low-Level Scribble API&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>6<tt>&nbsp;</tt><a name="(part._text)"></a><a name="(mod-path._scribble/text)"></a><a name="(idx._(gentag._12._(lib._scribblings/scribble/scribble..scrbl)))"></a>Text Generation</h3><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><a href="../guide/Module_Syntax.html#%28part._hash-lang%29" class="RktModLink" data-pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">scribble/text</span></a></td></tr></table></div><div class="SIntrapara">The <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">scribble/text</span></a> language
provides everything from <span class="RktSym">racket/base</span> with a few changes that
make it suitable as a text generation or a preprocessor language:</div><div class="SIntrapara"><ul><li><p>The language uses <span class="RktSym">read-syntax-inside</span> to read the body
of the module, similar to <a href="docreader.html" data-pltdoc="x">Document Reader</a>.  This means that
by default, all text is read in as Racket strings; and
<a href="reader.html" data-pltdoc="x">@-forms</a> can be used to use Racket
functions and expression escapes.</p></li><li><p>Values of expressions are printed with a custom <span class="RktSym">output</span>
function.  This function displays most values in a similar way
to <span class="RktSym"><a href="../reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29" class="RktValLink" data-pltdoc="x">display</a></span>, except that it is more convenient for a
textual output.</p></li></ul></div></p><h4>6.1<tt>&nbsp;</tt><a name="(part._.Writing_.Text_.Files)"></a>Writing Text Files</h4><p>The combination of the two features makes text in files in the
<span class="RktSym">scribble/text</span> language be read as strings, which get printed
out when the module is <span class="RktSym"><a href="../reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span>d, for example, when a file is
given as an argument to <span class="stt">racket</span>.  (In these example the left
part shows the source input, and the right part the printed result.)</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Programming languages should</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">be designed not by piling</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">feature on top of feature, but</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">blah blah blah.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Programming languages should</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">be designed not by piling</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">feature on top of feature, but</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">blah blah blah.</span></span></p></td></tr></table></td></tr></table></p><p>Using <a href="reader.html" data-pltdoc="x">@-forms</a>, we can define and use Racket
functions.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require racket/list)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define Foo "Preprocessing")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (3x . x)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">;; racket syntax here</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-between (list x x x) " "))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@Foo languages should</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">be designed not by piling</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">feature on top of feature, but</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@3x{blah}.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Preprocessing languages should</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">be designed not by piling</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">feature on top of feature, but</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">blah blah blah.</span></span></p></td></tr></table></td></tr></table></p><p>As demonstrated in this case, the <span class="RktSym">output</span> function simply
scans nested list structures recursively, which makes them convenient
for function results.  In addition, <span class="RktSym">output</span> prints most values
similarly to <span class="RktSym"><a href="../reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._display%29%29" class="RktValLink" data-pltdoc="x">display</a></span> &#8212;<wbr></wbr> notable exceptions are void and
false values which cause no output to appear.  This can be used for
convenient conditional output.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (errors n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(list n</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">" error"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(and (not (= n 1)) "s")))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">You have @errors[3] in your code,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I fixed @errors[1].</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">You have 3 errors in your code,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I fixed 1 error.</span></span></p></td></tr></table></td></tr></table></p><p>Using the scribble <a href="reader.html" data-pltdoc="x">@-forms</a> syntax, you can write
functions more conveniently too.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (errors n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">;; note the use of `unless'</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@n error@unless[(= n 1)]{s}})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">You have @errors[3] in your code,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I fixed @errors[1].</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">You have 3 errors in your code,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I fixed 1 error.</span></span></p></td></tr></table></td></tr></table></p><p>Following the details of the scribble reader, you may notice that in
these examples there are newline strings after each definition, yet
they do not show in the output.  To make it easier to write
definitions, newlines after definitions and indentation spaces before
them are ignored.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (plural n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(unless (= n 1) "s"))</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (errors n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@n error@plural[n]})</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">You have @errors[3] in your code,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@(define fixed 1)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I fixed @errors[fixed].</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">You have 3 errors in your code,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I fixed 1 error.</span></span></p></td></tr></table></td></tr></table></p><p>These end-of-line newline strings are not ignored when they follow
other kinds of expressions, which may lead to redundant empty lines in
the output.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n str)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-range 1 (add1 n))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@i @str,@"\n"}))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[3]{Mississippi}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></p><p>There are several ways to avoid having such empty lines in your
output.  The simplest way is to arrange for the function call&rsquo;s form
to end right before the next line begins, but this is often not too
convenient.  An alternative is to use a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">@;</span><span class="hspace"></span></span> comment, which
makes the scribble reader ignore everything that follows it up to and
including the newline.  (These methods can be applied to the line that
precedes the function call too, but the results are likely to have
what looks like erroneous indentation.  More about this below.)</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n str)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-range 1 (+ n 1))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@i @str,@"\n"}))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[3]{Mississippi</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}... done once.</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start again...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[3]{Massachusetts}@;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done again.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... done once.</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start again...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Massachusetts,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Massachusetts,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Massachusetts,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done again.</span></span></p></td></tr></table></td></tr></table></p><p>A better approach is to generate newlines only when needed.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require racket/list)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (counts n str)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-between</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-range 1 (+ n 1))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@i @str,})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n"))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@counts[3]{Mississippi}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></p><p>In fact, this is common enough that the <span class="RktSym">scribble/text</span>
language provides a convenient facility: <span class="RktSym">add-newlines</span> is a
function that is similar to <span class="RktSym"><a href="../reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._add-between%29%29" class="RktValLink" data-pltdoc="x">add-between</a></span> using a newline
string as the default separator, except that false and void values are
filtered out before doing so.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n str)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-newlines</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-range 1 (+ n 1))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@i @str,})))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[3]{Mississippi}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n str)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-newlines</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-range 1 (+ n 1))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@(and (even? i) @list{@i @str,}))))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[6]{Mississippi}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">4 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">6 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></p><p>The separator can be set to any value.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n str)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-newlines #:sep ",\n"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-range 1 (+ n 1))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@i @str})))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[3]{Mississippi}.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></p><h4>6.2<tt>&nbsp;</tt><a name="(part._.Defining_.Functions_and_.More)"></a>Defining Functions and More</h4><p>(Note: most of the tips in this section are applicable to any code
that uses the Scribble @-form syntax.)</p><p>Because the Scribble reader is uniform, you can use it in place of any
expression where it is more convenient.  (By convention, we use a
plain S-expression syntax when we want a Racket expression escape, and
an @-form for expressions that render as text, which, in the
<span class="RktSym">scribble/text</span> language, is any value-producing expression.)
For example, you can use an @-form for a function that you define.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define @bold[text] @list{*@|text|*})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">An @bold{important} note.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">An *important* note.</span></span></p></td></tr></table></td></tr></table></p><p>This is not commonly done, since most functions that operate with text
will need to accept a variable number of arguments.  In fact, this
leads to a common problem: what if we want to write a function that
consumes a number of &ldquo;text arguments&rdquo; rathen than a single
&ldquo;rest-like&rdquo; body?  The common solution for this is to provide the
separate text arguments in the S-expression part of an @-form.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (choose 1st 2nd)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Either @1st, or @|2nd|@"."})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define who "us")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@choose[@list{you're with @who}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{against @who}]</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Either you're with us, or against us.</span></span></p></td></tr></table></td></tr></table></p><p>You can even use @-forms with a Racket quote or quasiquote as the
&ldquo;head&rdquo; part to make it shorter, or use a macro to get grouping of
sub-parts without dealing with quotes.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (choose 1st 2nd)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Either @1st, or @|2nd|@"."})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define who "us")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@choose[@list{you're with @who}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{against @who}]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define-syntax-rule (compare (x ...) ...)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-newlines</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(list (list "* " x ...) ...)))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Shopping list:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@compare[@{apples}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@{oranges}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@{@(* 2 3) bananas}]</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Either you're with us, or against us.</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Shopping list:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* apples</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* oranges</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* 6 bananas</span></span></p></td></tr></table></td></tr></table></p><p>Yet another solution is to look at the text values and split the input
arguments based on a specific token.  Using <span class="RktSym"><a href="../reference/match.html#%28form._%28%28lib._racket%2Fmatch..rkt%29._match%29%29" class="RktStxLink" data-pltdoc="x">match</a></span> can make it
convenient &#8212;<wbr></wbr> you can even specify the patterns with @-forms.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require racket/match)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (features . text)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(match text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[@list{@|1st|@...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">---</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@|2nd|@...}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{&gt;&gt; Pros &lt;&lt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@1st;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&gt;&gt; Cons &lt;&lt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@|2nd|.}]))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@features{fast,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">reliable</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">---</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">expensive,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">ugly}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">&gt;&gt; Pros &lt;&lt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">fast,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">reliable;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&gt;&gt; Cons &lt;&lt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">expensive,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">ugly.</span></span></p></td></tr></table></td></tr></table></p><p>In particular, it is often convenient to split the input by lines,
identified by delimiting <span class="RktVal">"\n"</span> strings.  Since this can be
useful, a <span class="RktSym">split-lines</span> function is provided.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require racket/list)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (features . text)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-between (split-lines text)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">", "))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@features{red</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">fast</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">reliable}.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">red, fast, reliable.</span></span></p></td></tr></table></td></tr></table></p><p>Finally, the Scribble reader accepts <span style="font-style: italic">any</span> expression as the head
part of an @-form &#8212;<wbr></wbr> even an @ form.  This makes it possible to
get a number of text bodies by defining a curried function, where each
step accepts any number of arguments.  This, however, means that the
number of body expressions must be fixed.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define ((choose . 1st) . 2nd)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Either you're @1st, or @|2nd|.})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define who "me")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@@choose{with @who}{against @who}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Either you're with me, or against me.</span></span></p></td></tr></table></td></tr></table></p><h4>6.3<tt>&nbsp;</tt><a name="(part._.Using_.Printouts)"></a>Using Printouts</h4><p>Because the text language simply displays each toplevel value as the
file is run, it is possible to print text directly as part of the
output.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">First</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@display{Second}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Third</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">First</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Second</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Third</span></span></p></td></tr></table></td></tr></table></p><p>Taking this further, it is possible to write functions that output
some text <span style="font-style: italic">instead</span> of returning values that represent the text.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(for ([i (in-range 1 (+ n 1))])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(printf "~a Mississippi,\n" i)))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[3]@; avoid an empty line</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">... and I'm done.</span></span></p></td></tr></table></td></tr></table></p><p>This can be used to produce a lot of output text, even infinite.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(printf "~a Mississippi,\n" n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(count (add1 n)))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[1]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">this line is never printed!</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">4 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">5 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">...</span></span></p></td></tr></table></td></tr></table></p><p>However, you should be careful not to mix returning values with
printouts, as the results are rarely desirable.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@list{1 @display{two} 3}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt">two1<span class="hspace">&nbsp;&nbsp;</span><span class="stt">3</span></span></p></td></tr></table></td></tr></table></p><p>Note that you don&rsquo;t need side-effects if you want infinite output.
The <span class="RktSym">output</span> function iterates thunks and (composable)
promises, so you can create a loop that is delayed in either form.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (count n)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(cons @list{@n Mississippi,@"\n"}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(lambda ()</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(count (add1 n)))))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@count[1]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">this line is never printed!</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Start...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">1 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">2 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">3 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">4 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">5 Mississippi,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">...</span></span></p></td></tr></table></td></tr></table></p><h4>6.4<tt>&nbsp;</tt><a name="(part._.Indentation_in_.Preprocessed_output)"></a>Indentation in Preprocessed output</h4><p>An issue that can be very important in many text generation applications
is the indentation of the output.  This can be crucial in some cases, if
you&rsquo;re generating code for an indentation-sensitive language (e.g.,
Haskell, Python, or C preprocessor directives).  To get a better
understanding of how the pieces interact, you may want to review how the
<a href="reader.html" data-pltdoc="x">Scribble reader</a> section, but also remember that
you can use quoted forms to see how some form is read.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(format "~s" '@list{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">a</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">b</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">c})</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt">(list "a" "\n" "<span class="hspace">&nbsp;&nbsp;</span><span class="stt">" "b" "\n" "c")</span></span></p></td></tr></table></td></tr></table></p><p>The Scribble reader ignores indentation spaces in its body.  This is an
intentional feature, since you usually do not want an expression to
depend on its position in the source.  But the question is whether we
<span style="font-style: italic">can</span> render some output text with proper indentation.  The
<span class="RktSym">output</span> function achieves that by introducing <span class="RktSym">block</span>s.
Just like a list, a <span class="RktSym">block</span> contains a list of elements, and when
one is rendered, it is done in its own indentation level.  When a
newline is part of a <span class="RktSym">block</span>&rsquo;s contents, it causes the following
text to appear with indentation that corresponds to the column position
at the beginning of the block.</p><p>In addition, lists are also rendered as blocks by default, so they can
be used for the same purpose.  In most cases, this makes the output
appear &ldquo;as intended&rdquo; where lists are used for nested pieces of text
&#8212;<wbr></wbr> either from a literal <span class="RktSym"><a href="../reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span> expression, or an expression
that evaluates to a list, or when a list is passed on as a value; either
as a toplevel expression, or as a nested value; either appearing after
spaces, or after other output.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">foo @block{1</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">2</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">foo @list{4</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">5</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">6}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">foo 1</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">2</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">foo 4</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">5</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">6</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (code . text)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{begin</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">end})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@code{first</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">second</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@code{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">third</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">fourth}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">last}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">begin</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">first</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">second</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">begin</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">third</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">fourth</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">end</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">last</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">end</span></span></p></td></tr></table></td></tr></table></p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (enumerate . items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-newlines #:sep ";\n"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(for/list ([i (in-naturals 1)]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">[item (in-list items)])</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@|i|. @item})))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Todo: @enumerate[@list{Install Racket}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Hack, hack, hack}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Profit}].</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Todo: 1. Install Racket;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">2. Hack, hack, hack;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">3. Profit.</span></span></p></td></tr></table></td></tr></table></p><p>There are, however, cases when you need more refined control over the
output.  The <span class="RktSym">scribble/text</span> language provides a few functions
for such cases in addition to <span class="RktSym">block</span>.  The <span class="RktSym"><a href="decode.html#%28def._%28%28lib._scribble%2Fdecode..rkt%29._splice%29%29" class="RktValLink" data-pltdoc="x">splice</a></span>
function groups together a number of values but avoids introducing a new
indentation context.  Furthermore, lists are not always rendered as
<span class="RktSym">block</span>s &#8212;<wbr></wbr> instead, they are rendered as <span class="RktSym"><a href="decode.html#%28def._%28%28lib._scribble%2Fdecode..rkt%29._splice%29%29" class="RktValLink" data-pltdoc="x">splice</a></span>s when
they are used inside one, so you essentially use <span class="RktSym"><a href="decode.html#%28def._%28%28lib._scribble%2Fdecode..rkt%29._splice%29%29" class="RktValLink" data-pltdoc="x">splice</a></span> to
avoid the &ldquo;indentation group&rdquo; behavior, and <span class="RktSym">block</span> to restore
it.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (blah . text)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@splice{{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">blah(@block{@text});</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">}})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">start</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@splice{foo();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">loop:}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@list{if (something) @blah{one,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">two}}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">end</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">start</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">foo();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">loop:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if (something) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">blah(one,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">two);</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">end</span></span></p></td></tr></table></td></tr></table></p><p>The <span class="RktSym">disable-prefix</span> function disables all indentation
printouts in its contents, including the indentation before the body
of the <span class="RktSym">disable-prefix</span> value itself.  It is useful, for
example, to print out CPP directives.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (((IFFOO . var) . expr1) . expr2)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(define (array e1 e2)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{[@e1,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@e2]})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{var @var;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@disable-prefix{#ifdef FOO}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@var = @array[expr1 expr2];</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@disable-prefix{#else}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@var = @array[expr2 expr1];</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@disable-prefix{#endif}})</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">function blah(something, something_else) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@disable-prefix{#include "stuff.inc"}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@@@IFFOO{i}{something}{something_else}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">function blah(something, something_else) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">#include "stuff.inc"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">var i;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">#ifdef FOO</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">i = [something,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">something_else];</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">#else</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">i = [something_else,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">something];</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">#endif</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></p><p>If there are values after a <span class="RktSym">disable-prefix</span> value on the same
line, they <span style="font-style: italic">will</span> get indented to the goal column (unless the
output is already beyond it).</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (thunk name . body)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{function @name() {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@body</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">}})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (ifdef cond then else)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@disable-prefix{#}ifdef @cond</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@then</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@disable-prefix{#}else</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@else</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@disable-prefix{#}endif})</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">@thunk['do_stuff]{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">init();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@ifdef["HAS_BLAH"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{var x = blah();}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@thunk['blah]{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@ifdef["BLEHOS"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{@disable-prefix{#}@;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">include &lt;bleh.h&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">bleh();}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{error("no bleh");}]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">}]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">more_stuff();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">function do_stuff() {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">init();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"># ifdef HAS_BLAH</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">var x = blah();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"># else</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">function blah() {</span></span></p></td></tr><tr><td><p><span class="stt">#<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">ifdef BLEHOS</span></span></p></td></tr><tr><td><p><span class="stt">#<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">include &lt;bleh.h&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">bleh();</span></span></p></td></tr><tr><td><p><span class="stt">#<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">else</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">error("no bleh");</span></span></p></td></tr><tr><td><p><span class="stt">#<span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">endif</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"># endif</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">more_stuff();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></p><p>There are cases where each line should be prefixed with some string
other than a plain indentation.  The <span class="RktSym">add-prefix</span> function
causes its contents to be printed using some given string prefix for
every line.  The prefix gets accumulated to an existing indentation,
and indentation in the contents gets added to the prefix.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (comment . body)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@add-prefix["// "]{@body})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@comment{add : int int -&gt; string}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">char *foo(int x, int y) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@comment{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">skeleton:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">allocate a string</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">print the expression into it</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@comment{...more work...}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">char *buf = malloc(@comment{FIXME!</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">This is bad}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">100);</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">// add : int int -&gt; string</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">char *foo(int x, int y) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">// skeleton:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span>//<span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">allocate a string</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span>//<span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">print the expression into it</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span>//<span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">// ...more work...</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">char *buf = malloc(// FIXME!</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">// This is bad</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">100);</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></p><p>When combining <span class="RktSym">add-prefix</span> and <span class="RktSym">disable-prefix</span> there
is an additional value that can be useful: <span class="RktSym">flush</span>.  This is a
value that causes <span class="RktSym">output</span> to print the current indentation and
prefix.  This makes it possible to get the &ldquo;ignored as a prefix&rdquo;
property of <span class="RktSym">disable-prefix</span> but only for a nested prefix.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (comment . text)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(list flush</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@add-prefix[" *"]{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@disable-prefix{/*} @text */}))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">function foo(x) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@comment{blah</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">more blah</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">yet more blah}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if (x &lt; 0) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@comment{even more</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">blah here</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@comment{even</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">nested}}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">do_stuff();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">function foo(x) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">/* blah</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">* more blah</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">* yet more blah */</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">if (x &lt; 0) {</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">/* even more</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">* blah here</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">* /* even</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="hspace">&nbsp;&nbsp;</span><span class="stt">* nested */ */</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">do_stuff();</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">}</span></span></p></td></tr></table></td></tr></table></p><h4>6.5<tt>&nbsp;</tt><a name="(part._.Using_.External_.Files)"></a>Using External Files</h4><p>Using additional files that contain code for your preprocessing is
trivial: the source text is still source code in a module, so you can
<span class="RktSym"><a href="../reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span> additional files with utility functions.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Medium"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require "itemize.rkt")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Todo:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@itemize[@list{Hack some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Sleep some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">more}]</span></span></p></td></tr></table></td></tr><tr><td align="right" valign="top" class="Medium"><p><span style="background-color: #e8e8ff"><span style="font-style: italic"><span class="stt">itemize.rkt:&nbsp;</span></span></span></p></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang racket</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(provide itemize)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(define (itemize . items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(add-between (map (lambda (item)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(list "* " item))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n"))</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Todo:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Sleep some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">more</span></span></p></td></tr></table></td></tr></table></p><p>Note that the <a href="reader-internals.html#%28part._at-exp-lang%29" data-pltdoc="x"><span class="RktSym">at-exp</span> language</a> can
often be useful here, since such files need to deal with texts.  Using
it, it is easy to include a lot of textual content.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Medium"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require "stuff.rkt")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">Todo:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@itemize[@list{Hack some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Sleep some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">more}]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@summary</span></span></p></td></tr></table></td></tr><tr><td align="right" valign="top" class="Medium"><p><span style="background-color: #e8e8ff"><span style="font-style: italic"><span class="stt">stuff.rkt:&nbsp;</span></span></span></p></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang at-exp racket/base</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(require racket/list)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(provide (all-defined-out))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(define (itemize . items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(add-between (map (lambda (item)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{* @item})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n"))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(define summary</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@list{If that's not enough,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">I don't know what is.})</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Todo:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Sleep some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">more</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">If that's not enough,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I don't know what is.</span></span></p></td></tr></table></td></tr></table></p><p>Of course, the extreme side of this will be to put all of your content
in a plain Racket module, using @-forms for convenience.  However,
there is no need to use the text language in this case; instead, you can
<span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><span class="RktSym">scribble/text</span><span class="RktPn">)</span>, which will get all of the bindings
that are available in the <span class="RktSym">scribble/text</span> language.  Using
<span class="RktSym">output</span>, switching from a preprocessed files to a Racket file is
very easy &#8212;<wbr></wbr>- choosing one or the other depends on whether it is more
convenient to write a text file with occasional Racket expressions or
the other way.</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Short"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang at-exp racket/base</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(require scribble/text racket/list)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(define (itemize . items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">(add-between (map (lambda (item)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{* @item})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n"))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(define summary</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@list{If that's not enough,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">I don't know what is.})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">(output</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;</span><span class="stt">@list{</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">Todo:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@itemize[@list{Hack some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Sleep some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">more}]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@summary</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;</span><span class="stt">})</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">Todo:</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Sleep some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">* Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">more</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">If that's not enough,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">I don't know what is.</span></span></p></td></tr></table></td></tr></table></p><p>However, you might run into a case where it is desirable to include a
mostly-text file from a <span class="RktSym">scribble/text</span> source file.  It might be
because you prefer to split the source text to several files, or because
you need to use a template file that cannot have a <span class="RktInBG"><span class="hspace"></span><span class="RktIn">#lang</span><span class="hspace"></span></span>
header (for example, an HTML template file that is the result of an
external editor).  In these cases, the <span class="RktSym">scribble/text</span> language
provides an <span class="RktSym"><a href="../reference/include.html#%28form._%28%28lib._racket%2Finclude..rkt%29._include%29%29" class="RktStxLink" data-pltdoc="x">include</a></span> form that includes a file in the
preprocessor syntax (where the default parsing mode is text).</p><p><table cellspacing="0"><tr><td align="left" valign="center"><table cellspacing="0"><tr><td align="right" valign="top" class="Medium"><table cellspacing="0" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p></td></tr></table></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">#lang scribble/text</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(require racket/list)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define (itemize . items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">(list</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"&lt;ul&gt;"</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(add-between</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">(map (lambda (item)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{&lt;li&gt;@|item|&lt;/li&gt;})</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">items)</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"\n")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">"&lt;/ul&gt;"))</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define title "Todo")</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">@(define summary</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{If that's not enough,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">I don't know what is.})</span></span></p></td></tr><tr><td><p><br /></p></td></tr><tr><td><p><span class="stt"><span class="stt">@include["template.html"]</span></span></p></td></tr></table></td></tr><tr><td align="right" valign="top" class="Medium"><p><span style="background-color: #e8e8ff"><span style="font-style: italic"><span class="stt">template.html:&nbsp;</span></span></span></p></td><td align="left" valign="top"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">&lt;html&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;head&gt;&lt;title&gt;@|title|&lt;/title&gt;&lt;/head&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;body&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;h1&gt;@|title|&lt;/h1&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">@itemize[@list{Hack some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Sleep some}</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">@list{Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">more}]</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;p&gt;&lt;i&gt;@|summary|&lt;/i&gt;&lt;/p&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;/body&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;/html&gt;</span></span></p></td></tr></table></td></tr></table></td><td align="left" valign="center" class="Short"><p>&nbsp;&rarr;&nbsp;</p></td><td align="left" valign="center"><table cellspacing="0" class="Shaded" style="font-size: 82%;"><tr><td><p><span class="stt"><span class="stt">&lt;html&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;head&gt;&lt;title&gt;Todo&lt;/title&gt;&lt;/head&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;body&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;h1&gt;Todo&lt;/h1&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;ul&gt;&lt;li&gt;Hack some&lt;/li&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;li&gt;Sleep some&lt;/li&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">&lt;li&gt;Hack some</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">more&lt;/li&gt;&lt;/ul&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">&lt;p&gt;&lt;i&gt;If that's not enough,</span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">I don't know what is.&lt;/i&gt;&lt;/p&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;/body&gt;</span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">&lt;/html&gt;</span></span></p></td></tr></table></td></tr></table></p><p>(Using <span class="RktSym"><a href="../reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span> with a text file in the <span class="RktSym">scribble/text</span>
language will not work as intended: the language will display the text
is when the module is invoked, so the required file&rsquo;s contents will be
printed before any of the requiring module&rsquo;s text does.  If you find
yourself in such a situation, it is better to switch to a
Racket-with-@-expressions file as shown above.)</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="lp.html" title="backward to &quot;5 Literate Programming&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Scribble: The Racket Documentation Tool&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="internals.html" title="forward to &quot;7 Low-Level Scribble API&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>