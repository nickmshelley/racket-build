<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>11&nbsp;GIF File Writing</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">File:<span class="mywbr"> </span> Racket File Format Libraries</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="convertible.html" class="tocviewlink" data-pltdoc="x">Convertible:<span class="mywbr"> </span> Data-<wbr></wbr>Conversion Protocol</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="gzip.html" class="tocviewlink" data-pltdoc="x"><span class="stt">gzip</span> Compression and File Creation</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="gunzip.html" class="tocviewlink" data-pltdoc="x"><span class="stt">gzip</span> Decompression</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="zip.html" class="tocviewlink" data-pltdoc="x"><span class="stt">zip</span> File Creation</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="unzip.html" class="tocviewlink" data-pltdoc="x"><span class="stt">zip</span> File Extraction</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="tar.html" class="tocviewlink" data-pltdoc="x"><span class="stt">tar</span> File Creation</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="untar.html" class="tocviewlink" data-pltdoc="x"><span class="stt">tar</span> File Extraction</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="untgz.html" class="tocviewlink" data-pltdoc="x"><span class="stt">tar</span>+<span class="stt">gzip</span> File Extraction</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="md5.html" class="tocviewlink" data-pltdoc="x">MD5 Message Digest</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="sha1b.html" class="tocviewlink" data-pltdoc="x">SHA1 Message Digest</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">GIF File Writing</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="ico.html" class="tocviewlink" data-pltdoc="x">ICO File Reading and Writing</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="resource.html" class="tocviewlink" data-pltdoc="x">Windows Registry</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" data-pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-stream~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>stream?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._image-ready-gif-stream~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">image-<wbr></wbr>ready-<wbr></wbr>gif-<wbr></wbr>stream?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._image-or-control-ready-gif-stream~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">image-<wbr></wbr>or-<wbr></wbr>control-<wbr></wbr>ready-<wbr></wbr>gif-<wbr></wbr>stream?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._empty-gif-stream~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">empty-<wbr></wbr>gif-<wbr></wbr>stream?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-colormap~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>colormap?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._color~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">color?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._dimension~3f))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">dimension?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-state))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>state</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-start))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>start</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-add-image))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>add-<wbr></wbr>image</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-add-control))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>add-<wbr></wbr>control</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-add-loop-control))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>add-<wbr></wbr>loop-<wbr></wbr>control</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-add-comment))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>add-<wbr></wbr>comment</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._gif-end))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">gif-<wbr></wbr>end</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._file/gif..rkt)._quantize))" class="tocsublink" data-pltdoc="x"><span title="Provided from: file/gif"><span class="RktSym"><span class="RktValLink">quantize</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="sha1b.html" title="backward to &quot;10 SHA1 Message Digest&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;File: Racket File Format Libraries&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ico.html" title="forward to &quot;12 ICO File Reading and Writing&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>11<tt>&nbsp;</tt><a name="(part._gif)"></a><a name="(mod-path._file/gif)"></a>GIF File Writing</h3><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">file/gif</span></a><span class="RktPn">)</span></td></tr></table></p><p>The <a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">file/gif</span></a> library provides functions for
writing GIF files to a stream, including GIF files with multiple
images and controls (such as animated GIFs).</p><p>A GIF stream is created by <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-start%29%29" class="RktValLink" data-pltdoc="x">gif-start</a></span>, and then individual
images are written with <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-image%29%29" class="RktValLink" data-pltdoc="x">gif-add-image</a></span>. Optionally,
<span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-control%29%29" class="RktValLink" data-pltdoc="x">gif-add-control</a></span> inserts instructions for rendering the
images. The <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-end%29%29" class="RktValLink" data-pltdoc="x">gif-end</a></span> function ends the GIF stream.</p><p>A GIF stream can be in any one of the following states:</p><ul><li><p><span class="RktVal">'</span><span class="RktVal">init</span> : no images or controls have been added to the
stream</p></li><li><p><span class="RktVal">'</span><span class="RktVal">image-or-control</span> : another image or control can be
written</p></li><li><p><span class="RktVal">'</span><span class="RktVal">image</span> : another image can be written (but not a
control, since a control was written)</p></li><li><p><span class="RktVal">'</span><span class="RktVal">done</span> : nothing more can be added</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-stream~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">gif-stream?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a GIF stream created by
        <span class="RktSym">gif-write</span>, <span class="RktVal">#f</span> otherwise.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._image-ready-gif-stream~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._image-ready-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">image-ready-gif-stream?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a GIF stream that is not in
        <span class="RktVal">'</span><span class="RktVal">done</span> mode, <span class="RktVal">#f</span> otherwise.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._image-or-control-ready-gif-stream~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._image-or-control-ready-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">image-or-control-ready-gif-stream?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a GIF stream that is in
        <span class="RktVal">'</span><span class="RktVal">init</span> or <span class="RktVal">'</span><span class="RktVal">image-or-control</span> mode, <span class="RktVal">#f</span>
        otherwise.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._empty-gif-stream~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._empty-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">empty-gif-stream?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a GIF stream that in
        <span class="RktVal">'</span><span class="RktVal">init</span> mode, <span class="RktVal">#f</span> otherwise.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-colormap~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-colormap~3f%29%29" class="RktValLink" data-pltdoc="x">gif-colormap?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> represets a colormap,
        <span class="RktVal">#f</span> otherwise.  A colormap is a list whose size is a power
        of <span style="font-style: italic"></span>2<span style="font-style: italic"></span> between <span style="font-style: italic"></span>2<span style="font-style: italic"></span><span style="vertical-align: super; font-size: 80%"><span style="font-style: italic"></span>1<span style="font-style: italic"></span></span><span style="font-style: italic"></span> and <span style="font-style: italic"></span>2<span style="font-style: italic"></span><span style="vertical-align: super; font-size: 80%"><span style="font-style: italic"></span>8<span style="font-style: italic"></span></span><span style="font-style: italic"></span>, and whose elements
        are vectors of size 3 containing colors (i.e., exact integers
                                                       between <span style="font-style: italic"></span>0<span style="font-style: italic"></span> and <span style="font-style: italic"></span>2<span style="font-style: italic"></span>5<span style="font-style: italic"></span>5<span style="font-style: italic"></span> inclusive).</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._color~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._color~3f%29%29" class="RktValLink" data-pltdoc="x">color?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">The same as <span class="RktSym"><a href="../reference/bytestrings.html#%28def._%28%28quote._~23~25kernel%29._byte~3f%29%29" class="RktValLink" data-pltdoc="x">byte?</a></span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._dimension~3f))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/booleans.html#%28def._%28%28quote._~23~25kernel%29._boolean~3f%29%29" class="RktValLink" data-pltdoc="x">boolean?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is an exact integer between
        <span class="RktVal">0</span> and <span class="RktVal">65535</span> inclusive, <span class="RktVal">#f</span>
        otherwise.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-state))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-state%29%29" class="RktValLink" data-pltdoc="x">gif-state</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stream</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/symbols.html#%28def._%28%28quote._~23~25kernel%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">gif-stream?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the state of <span class="RktVar">stream</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-start))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-start%29%29" class="RktValLink" data-pltdoc="x">gif-start</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span><span class="RktVar">w</span><span class="hspace">&nbsp;</span><span class="RktVar">h</span><span class="hspace">&nbsp;</span><span class="RktVar">bg-color</span><span class="hspace">&nbsp;</span><span class="RktVar">cmap</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">gif-stream?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/port-ops.html#%28def._%28%28quote._~23~25kernel%29._output-port~3f%29%29" class="RktValLink" data-pltdoc="x">output-port?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">w</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">h</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bg-color</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._color~3f%29%29" class="RktValLink" data-pltdoc="x">color?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cmap</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-colormap~3f%29%29" class="RktValLink" data-pltdoc="x">gif-colormap?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Writes the start of a GIF file to the given output port, and
returns a GIF stream that adds to the output port.</div></p><p>The width and height determine a virtual space for the overall
GIF image.  Individual images added to the GIF stream must fit
within this virtual space.  The space is initialized by the
given background color.</p><p>Finally, the default meaning of color numbers (such as the
background color) is determined by the given colormap, but
individual images within the GIF file can have their own
colormaps.</p><p><div class="SIntrapara">A global colormap need not be supplied, in which case a
colormap must be supplied for each image. Beware that the
bg-color is ill-defined if a global colormap is not
provided.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-add-image))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-image%29%29" class="RktValLink" data-pltdoc="x">gif-add-image</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stream</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">left</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">top</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">width</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">height</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">interlaced?</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">cmap</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">bstr</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._image-ready-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">image-ready-gif-stream?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">left</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">top</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">interlaced?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cmap</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-colormap~3f%29%29" class="RktValLink" data-pltdoc="x">gif-colormap?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bstr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/bytestrings.html#%28def._%28%28quote._~23~25kernel%29._bytes~3f%29%29" class="RktValLink" data-pltdoc="x">bytes?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Writes an image to the given GIF stream. The <span class="RktVar">left</span>,
<span class="RktVar">top</span>, <span class="RktVar">width</span>, and <span class="RktVar">height</span> values
specify the location and size of the image within the overall
GIF image&rsquo;s virtual space.</div></p><p>If <span class="RktVar">interlaced?</span> is true, then <span class="RktVar">bstr</span> should
provide bytes ininterlaced order instead of top-to-bottom
order. Interlaced order is:</p><ul><li><p>every 8th row, starting with 0</p></li><li><p>every 8th row, starting with 4</p></li><li><p>every 4th row, starting with 2</p></li><li><p>every 2nd row, starting with 1</p></li></ul><p>If a global color is provided with <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-start%29%29" class="RktValLink" data-pltdoc="x">gif-start</a></span>, a
<span class="RktVal">#f</span> value can be provided for <span class="RktVar">cmap</span>.</p><p>The <span class="RktVar">bstr</span> argument specifies the pixel content of the
image.  Each byte specifies a color (i.e., an index in the
colormap).  Each row is provided left-to-right, and the rows
provided either top-to-bottom or in interlaced order (see
above).  If the image is prefixed with a control that specifies
an transparent index (see <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-control%29%29" class="RktValLink" data-pltdoc="x">gif-add-control</a></span>), then the
corresponding &ldquo;color&rdquo; doesn&rsquo;t draw into the overall GIF
image.</p><p><div class="SIntrapara">An exception is raised if any byte value in <span class="RktVar">bstr</span> is
larger than the colormap&rsquo;s length, if the <span class="RktVar">bstr</span> length
is not <span class="RktVar">width</span> times <span class="RktVar">height</span>, or if the
<span class="RktVar">top</span>, <span class="RktVar">left</span>, <span class="RktVar">width</span>, and
<span class="RktVar">height</span> dimensions specify a region beyond the overall
GIF image&rsquo;s virtual space.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-add-control))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-control%29%29" class="RktValLink" data-pltdoc="x">gif-add-control</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stream</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">disposal</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">wait-for-input?</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">delay</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">transparent</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._image-or-control-ready-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">image-or-control-ready-gif-stream?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">disposal</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">any</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">keep</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">restore-bg</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">restore-prev</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">wait-for-input?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">delay</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">transparent</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._color~3f%29%29" class="RktValLink" data-pltdoc="x">color?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Writes an image-control command to a GIF stream. Such a control
must appear just before an image, and it applies to the
following image.</div></p><p>The GIF image model involves processing images one by one,
placing each image into the specified position within the
overall image&rsquo;s virtual space. An image-control command can
specify a delay before an image is added (to create animated
GIFs), and it also specifies how the image should be kept or
removed from the overall image before proceeding to the next
one (also for GIF animation).</p><p>The <span class="RktVar">disposal</span> argument specifies how to proceed:</p><ul><li><p><span class="RktVal">'</span><span class="RktVal">any</span> : doesn&rsquo;t matter (perhaps because
the next image completely overwrites the
current one)</p></li><li><p><span class="RktVal">'</span><span class="RktVal">keep</span> : leave the image in place</p></li><li><p><span class="RktVal">'</span><span class="RktVal">restore-bg</span> : replace the image with
the background color</p></li><li><p><span class="RktVal">'</span><span class="RktVal">restore-prev</span> : restore the overall
image content to the content before the image
is added</p></li></ul><p>If <span class="RktVar">wait-for-input?</span> is true, then the display program
may wait for some cue from the user (perhaps a mouse click)
before adding the image.</p><p>The <span class="RktVar">delay</span> argument specifies a delay in 1/100s of a
second.</p><p>If the <span class="RktVar">transparent</span> argument is a color, then it
determines an index that is used to represent transparent
pixels in the follow image (as opposed to the color specified
by the colormap for the index).</p><p><div class="SIntrapara">An exception is raised if a control is already added to
<span class="RktVar">stream</span> without a corresponding image.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-add-loop-control))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-loop-control%29%29" class="RktValLink" data-pltdoc="x">gif-add-loop-control</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span><span class="RktVar">iteration</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._empty-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">empty-gif-stream?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">iteration</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._dimension~3f%29%29" class="RktValLink" data-pltdoc="x">dimension?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Writes a control command to a GIF stream for which no images or
other commands have already been written. The command causes
the animating sequence of images in the GIF to be repeated
&lsquo;iteration-dimension&rsquo; times, where 0 can be used to mean
&ldquo;infinity.&rdquo;</div></p><p><div class="SIntrapara">An exception is raise if some control or image has been added
to the stream already.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-add-comment))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-add-comment%29%29" class="RktValLink" data-pltdoc="x">gif-add-comment</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span><span class="RktVar">bstr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._image-or-control-ready-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">image-or-control-ready-gif-stream?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bstr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/bytestrings.html#%28def._%28%28quote._~23~25kernel%29._bytes~3f%29%29" class="RktValLink" data-pltdoc="x">bytes?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Adds a generic comment to the GIF stream.</div></p><p><div class="SIntrapara">An exception is raised if an image-control command was just
written to the stream (so that an image is required next).</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._gif-end))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-end%29%29" class="RktValLink" data-pltdoc="x">gif-end</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stream</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#%28def._%28%28quote._~23~25kernel%29._void~3f%29%29" class="RktValLink" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stream</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._image-or-control-ready-gif-stream~3f%29%29" class="RktValLink" data-pltdoc="x">image-or-control-ready-gif-stream?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Finishes writing a GIF file. The GIF stream&rsquo;s output port is
not automatically closed.</div></p><p><div class="SIntrapara">An exception is raised if an image-control command was just
written to the stream (so that an image is required next).</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._file/gif..rkt)._quantize))"></a><span title="Provided from: file/gif"><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._quantize%29%29" class="RktValLink" data-pltdoc="x">quantize</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">bstr</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="../reference/bytestrings.html#%28def._%28%28quote._~23~25kernel%29._bytes~3f%29%29" class="RktValLink" data-pltdoc="x">bytes?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._gif-colormap~3f%29%29" class="RktValLink" data-pltdoc="x">gif-colormap?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._color~3f%29%29" class="RktValLink" data-pltdoc="x">color?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">bstr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._and%2Fc%29%29" class="RktValLink" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/bytestrings.html#%28def._%28%28quote._~23~25kernel%29._bytes~3f%29%29" class="RktValLink" data-pltdoc="x">bytes?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">bstr</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._remainder%29%29" class="RktValLink" data-pltdoc="x">remainder</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/bytestrings.html#%28def._%28%28quote._~23~25kernel%29._bytes-length%29%29" class="RktValLink" data-pltdoc="x">bytes-length</a></span><span class="hspace">&nbsp;</span><span class="RktVar">bstr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Each image in a GIF stream is limited to 256 colors, including the
transparent &ldquo;color,&rdquo; if any. The <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._quantize%29%29" class="RktValLink" data-pltdoc="x">quantize</a></span> function
converts a 24-bit image (plus alpha channel) into an
indexed-color image, reducing the number of colors if necessary.</div></p><p>Given a set of pixels expressed in ARGB format (i.e., each four
bytes is a set of values for one pixel: alpha, red, blue, and
green), <span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._quantize%29%29" class="RktValLink" data-pltdoc="x">quantize</a></span> produces produces</p><ul><li><p>bytes for the image (i.e., a array of colors,
expressed as a byte string)</p></li><li><p>a colormap</p></li><li><p>either <span class="RktVal">#f</span> or a color index for the
       transparent &ldquo;color&rdquo;</p></li></ul><p>The conversion treats alpha values less than 128 as transparent
pixels, and other alpha values as solid.</p><p>The quantization process uses Octrees [<a href="doc-bibliography.html#%28cite._.Gervautz1990%29" data-pltdoc="x">Gervautz1990</a>] to construct an adaptive
palette for all (non-transparent) colors in the image.  This implementation is
based on an article by Dean Clark [<a href="doc-bibliography.html#%28cite._.Clark1996%29" data-pltdoc="x">Clark1996</a>].</p><p>To convert a collection of images all with the same quantization,
simply append them for the input of a single call of
<span class="RktSym"><a href="#%28def._%28%28lib._file%2Fgif..rkt%29._quantize%29%29" class="RktValLink" data-pltdoc="x">quantize</a></span>, and then break apart the result bytes.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="sha1b.html" title="backward to &quot;10 SHA1 Message Digest&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;File: Racket File Format Libraries&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="ico.html" title="forward to &quot;12 ICO File Reading and Writing&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>