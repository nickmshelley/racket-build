<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>3&nbsp;Developing Packages</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Package Management in Racket (Beta)</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Package_Concepts.html" class="tocviewlink" data-pltdoc="x">Package Concepts</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Managing_Packages.html" class="tocviewlink" data-pltdoc="x">Managing Packages</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Developing Packages</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="metadata.html" class="tocviewlink" data-pltdoc="x">Package Metadata</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="PLaneT_Compatibility.html" class="tocviewlink" data-pltdoc="x"><span class="planetName">PLane<span class="mywbr"> </span>T</span> Compatibility</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="FAQ.html" class="tocviewlink" data-pltdoc="x">FAQ</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Future_Plans.html" class="tocviewlink" data-pltdoc="x">Future Plans</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Developing Packages</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._github-deploy%29" class="tocviewlink" data-pltdoc="x">Git<span class="mywbr"> </span>Hub Deployment</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._manual-deploy%29" class="tocviewlink" data-pltdoc="x">Manual Deployment</a></td></tr><tr><td align="right">3.3&nbsp;</td><td><a href="#%28part._.Helping_.Others_.Discover_.Your_.Package%29" class="tocviewlink" data-pltdoc="x">Helping Others Discover Your Package</a></td></tr><tr><td align="right">3.4&nbsp;</td><td><a href="#%28part._.Naming_and_.Designing_.Packages%29" class="tocviewlink" data-pltdoc="x">Naming and Designing Packages</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#(part._github-deploy)" class="tocsubseclink" data-pltdoc="x">Git<span class="mywbr"> </span>Hub Deployment</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#(part._manual-deploy)" class="tocsubseclink" data-pltdoc="x">Manual Deployment</a></td></tr><tr><td><span class="tocsublinknumber">3.3<tt>&nbsp;</tt></span><a href="#(part._.Helping_.Others_.Discover_.Your_.Package)" class="tocsubseclink" data-pltdoc="x">Helping Others Discover Your Package</a></td></tr><tr><td><span class="tocsublinknumber">3.4<tt>&nbsp;</tt></span><a href="#(part._.Naming_and_.Designing_.Packages)" class="tocsubseclink" data-pltdoc="x">Naming and Designing Packages</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Managing_Packages.html" title="backward to &quot;2 Managing Packages&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Package Management in Racket (Beta)&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="metadata.html" title="forward to &quot;4 Package Metadata&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._.Developing_.Packages)"></a>Developing Packages</h3><p>To create a package, first make a directory for your package and
select its name, &#8249;<span style="font-style: italic">package</span>&#8250;:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">mkdir </span>&#8249;<span style="font-style: italic">package</span>&#8250;</p><p>Next, link your development directory to your local package
repository:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco pkg install --link </span>&#8249;<span style="font-style: italic">package</span>&#8250;</p><p>Optionally, enter your directory and create a basic <span class="stt">"info.rkt"</span> file:</p><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">cd </span>&#8249;<span style="font-style: italic">package</span>&#8250;</div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">echo "#lang setup/infotab" &gt; info.rkt</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">echo "(define deps (list))" &gt;&gt; info.rkt</span></div></p><p>The <span class="stt">"info.rkt"</span> file is not necessary if you have no dependencies, but
you may wish to create it to simplify adding dependencies in the
future.</p><p>Next, inside the &#8249;<span style="font-style: italic">package</span>&#8250; directory, create directories for
the collections and modules that your package will provide. For
example, the developer of <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">tic-tac-toe</span> package that provides
<span class="RktSym">games/tic-tac-toe/main</span> and <span class="RktSym">data/matrix</span>
libraries might create directories and files like this:</p><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">mkdir -p games/tic-tac-toe</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">touch games/tic-tac-toe/info.rkt</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">touch games/tic-tac-toe/main.rkt</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">mkdir -p data</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">touch data/matrix.rkt</span></div></p><p>After your package is ready to deploy, choose either <a href="#%28part._github-deploy%29" data-pltdoc="x">GitHub Deployment</a>
or <a href="#%28part._manual-deploy%29" data-pltdoc="x">Manual Deployment</a>.</p><h4>3.1<tt>&nbsp;</tt><a name="(part._github-deploy)"></a>GitHub Deployment</h4><p>First, <a href="https://github.com/signup/free">create a free account</a> on GitHub,
then <a href="https://github.com/new">create a repository for your
package</a> (<a href="https://help.github.com/articles/create-a-repo">documentation</a>).
Initialize the Git repository locally and do your first push like this:</p><p><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">git init</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">git add *</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">git commit -m "First commit"</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">git remote add origin https://github.com/</span>&#8249;<span style="font-style: italic">user</span>&#8250;<span class="stt">/</span>&#8249;<span style="font-style: italic">package</span>&#8250;<span class="stt">.git</span></div><div class="SIntrapara"><span class="hspace">&nbsp;&nbsp;</span><span class="stt">git push -u origin master</span></div></p><p>Now, publish your package source as:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">github://github.com/</span>&#8249;<span style="font-style: italic">user</span>&#8250;<span class="stt">/</span>&#8249;<span style="font-style: italic">package</span>&#8250;<span class="stt">/</span>&#8249;<span style="font-style: italic">branch</span>&#8250;</p><p>Typically, &#8249;<span style="font-style: italic">branch</span>&#8250; will be <span class="stt">master</span>, but you may wish to use
different branches for releases and development.</p><p>Whenever you</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">git push</span></p><p>your changes will automatically be discovered by those who used your
package source when they use <span class="stt">raco pkg update</span>.</p><h4>3.2<tt>&nbsp;</tt><a name="(part._manual-deploy)"></a>Manual Deployment</h4><p>Alternatively, you can deploy your package by publishing it on a URL
you control. If you do this, it is preferable to create an archive
first:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">raco pkg create </span>&#8249;<span style="font-style: italic">package</span>&#8250;</p><p>And then upload the archive and its <a href="Package_Concepts.html#%28tech._checksum%29" class="techoutside" data-pltdoc="x"><span class="techinside">checksum</span></a> to your site:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">scp </span>&#8249;<span style="font-style: italic">package</span>&#8250;<span class="stt">.zip </span>&#8249;<span style="font-style: italic">package</span>&#8250;<span class="stt">.zip.CHECKSUM your-host:public_html/</span></p><p>Now, publish your package source as:</p><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">http://your-host/~</span>&#8249;<span style="font-style: italic">user</span>&#8250;<span class="stt">/</span>&#8249;<span style="font-style: italic">package</span>&#8250;<span class="stt">.zip</span></p><p>Whenever you want to provide a new release of a package, recreate and reupload the
package archive (and <a href="Package_Concepts.html#%28tech._checksum%29" class="techoutside" data-pltdoc="x"><span class="techinside">checksum</span></a>). Your changes will automatically be
discovered by those who used your package source when they use
<span class="stt">raco pkg update</span>.</p><h4>3.3<tt>&nbsp;</tt><a name="(part._.Helping_.Others_.Discover_.Your_.Package)"></a>Helping Others Discover Your Package</h4><p>By using either of the above deployment techniques, anyone will be
able to use your package by referring to your <a href="Package_Concepts.html#%28tech._package._source%29" class="techoutside" data-pltdoc="x"><span class="techinside">package source</span></a>.
However, they will not be able to refer to
it by a simple name until it is listed on a <a href="Package_Concepts.html#%28tech._package._name._resolver%29" class="techoutside" data-pltdoc="x"><span class="techinside">package name resolver</span></a>.</p><p>If you&rsquo;d like to use the official <a href="Package_Concepts.html#%28tech._package._name._resolver%29" class="techoutside" data-pltdoc="x"><span class="techinside">package name resolver</span></a>, browse
to
<a href="https://pkg.racket-lang.org/manage/upload">https://pkg.racket-lang.org/manage/upload</a>
and upload a new package. You will need to create an account and log
in first.</p><p>You only need to go to this site <span style="font-style: italic">once</span> to list your package. The
server will periodically check the package source you designate for
updates.</p><p>If you use this server, and use GitHub for deployment, then you will
never need to open a web browser to update your package for end
users. You just need to push to your GitHub repository, then within 24
hours, the official <a href="Package_Concepts.html#%28tech._package._name._resolver%29" class="techoutside" data-pltdoc="x"><span class="techinside">package name resolver</span></a> will notice, and
<span class="stt">raco pkg update</span> will work on your user&rsquo;s machines.</p><h4>3.4<tt>&nbsp;</tt><a name="(part._.Naming_and_.Designing_.Packages)"></a>Naming and Designing Packages</h4><p>Although of course not required, we suggest the following system for
naming and designing packages:</p><ul><li><p>Packages should not include the name of the author or
organization that produces them, but be named based on the content of
the package. For example, <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">data-priority-queue</span> is preferred
to <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">johns-amazing-queues</span>.</p></li><li><p>Packages that provide an interface to a foreign library or
service should be named the same as the service. For example,
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">cairo</span> is preferred to <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Racket-cairo</span> or a similar
name.</p></li><li><p>Packages should not generally contain version-like elements in
their names, initially. Instead, version-like elements should be added
when backwards incompatible changes are necessary. For example,
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">data-priority-queue</span> is preferred to
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">data-priority-queue1</span>. Exceptions include packages that
present interfaces to external, versioned things, such as
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">sqlite3</span> or <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">libgtk2</span>.</p></li><li><p>A <a href="Package_Concepts.html#%28tech._version%29" class="techoutside" data-pltdoc="x"><span class="techinside">version</span></a> declaration for a package is used only by other
package implementors to effectively declare dependencies on provided
features. Such declarations allow <span class="stt">raco pkg install</span> and
<span class="stt">raco pkg update</span> to help check dependencies.  Declaring and
changing a version is optional, and <a href="Package_Concepts.html#%28tech._package._name._resolver%29" class="techoutside" data-pltdoc="x"><span class="techinside">package name resolvers</span></a>
ignore version declarations; in particular, a package is a candidate
for updating when its <a href="Package_Concepts.html#%28tech._checksum%29" class="techoutside" data-pltdoc="x"><span class="techinside">checksum</span></a> changes, independent of whether
the package&rsquo;s version changes or in which direction the version
changes.</p></li><li><p>Packages should not include large sets of utilities libraries
that are likely to cause conflicts. For example, packages should not
contain many extensions to the <span class="stt">"racket"</span> collection, like
<span class="stt">"racket/more-lists.rkt"</span> and
<span class="stt">"racket/more-bools.rkt"</span>. Instead, such as extensions should
be separated into their own packages.</p></li><li><p>Packages should generally provide one collection with a name
similar to the name of the package. For example, <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">libgtk1</span>
should provide a collection named <span class="stt">"libgtk"</span>. Exceptions
include extensions to existing collection, such as new data-structures
for the <span class="stt">"data"</span> collection, DrRacket tools, new games for PLT
Games, etc.</p></li><li><p>Packages are not allowed to start with <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">plt</span>,
<span style="font-family: sans-serif; font-size: 80%; font-weight: bold">racket</span>, or <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">planet</span> without special approval from
PLT curation.</p></li></ul><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3.2&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="Managing_Packages.html" title="backward to &quot;2 Managing Packages&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Package Management in Racket (Beta)&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="metadata.html" title="forward to &quot;4 Package Metadata&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>